\hypertarget{System3D_8h_source}{}\doxysection{System3\+D.\+h}
\label{System3D_8h_source}\index{src/core/System3D.h@{src/core/System3D.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * System3D.h}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ *  Created on: 7 juin 2024}}
\DoxyCodeLine{5 \textcolor{comment}{ *      Author: esn}}
\DoxyCodeLine{6 \textcolor{comment}{ */}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef SYSTEM3D\_H\_}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define SYSTEM3D\_H\_}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <unordered\_set>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}../utilities/macros.h"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}../core/Vector3D.h"{}}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}../core/CoordinateSystem3D.h"{}}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}Oct.h"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}TimeSensitive.h"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}../display/Displayable.h"{}}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{comment}{/*}}
\DoxyCodeLine{23 \textcolor{comment}{ * \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{24 \textcolor{comment}{ *  System3D<T, U> :)}}
\DoxyCodeLine{25 \textcolor{comment}{ * \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{26 \textcolor{comment}{ * Can contain any object having .x, .y, .z, methods: .getX(), .getY(), .getZ(), .getPosition()}}
\DoxyCodeLine{27 \textcolor{comment}{ * If you want to use the functions (rrr, ...) you need a .getW() too}}
\DoxyCodeLine{28 \textcolor{comment}{ */}}
\DoxyCodeLine{29 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keyword}{class }\mbox{\hyperlink{classSystem3D}{System3D}} : \textcolor{keyword}{public} \mbox{\hyperlink{classTimeSensitive}{TimeSensitive}}, \textcolor{keyword}{public} \mbox{\hyperlink{structDisplayable}{Displayable}}<U>\{}
\DoxyCodeLine{30 \textcolor{keyword}{public}:}
\DoxyCodeLine{31     U a;                                                                        \textcolor{comment}{// Lenght of the side of the zone.}}
\DoxyCodeLine{32     std::shared\_ptr<Oct<T, U>> poctree;                                         \textcolor{comment}{// Pointer to the Octree.}}
\DoxyCodeLine{33     std::unordered\_set<std::shared\_ptr<T>> pelements;}
\DoxyCodeLine{34     void (*ptrLaw) (\mbox{\hyperlink{classSystem3D}{System3D<T, U>}}* psys);                                            \textcolor{comment}{// Pointer to a function operating on the system}}
\DoxyCodeLine{35     \textcolor{comment}{//Vector3D<U> (*ptrLaw) (std::shared\_ptr<T>, std::shared\_ptr<T>);               // Pointer to a function operating on 2 particles (Todo List)}}
\DoxyCodeLine{36     std::shared\_ptr<CoordinateSystem3D<T>> pcoord\_sys;}
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \mbox{\hyperlink{classSystem3D}{System3D}}();}
\DoxyCodeLine{39     \textcolor{keyword}{virtual} \mbox{\hyperlink{classSystem3D}{\string~System3D}}();}
\DoxyCodeLine{40     \mbox{\hyperlink{classSystem3D}{System3D}}(\textcolor{keyword}{const} \mbox{\hyperlink{classSystem3D}{System3D<T, U>}}\& sys);}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D_ae0fad393c64d5aea53dc476db88aaf48}{setA}}(\textcolor{keyword}{const} U\& a);}
\DoxyCodeLine{43     \textcolor{keywordtype}{float} getAlpha() \textcolor{keyword}{const};}
\DoxyCodeLine{44     \textcolor{keywordtype}{void} setAlpha(\textcolor{keyword}{const} \textcolor{keywordtype}{float}\& alpha);}
\DoxyCodeLine{45     std::shared\_ptr<T> \mbox{\hyperlink{classSystem3D_a109a6dd25d2f099aa15cb6c6a4547b39}{addPElement}}(std::shared\_ptr<T> pelement);}
\DoxyCodeLine{46     std::unordered\_set<std::shared\_ptr<T>> getPNeighbors(\textcolor{keyword}{const} std::shared\_ptr<T> pelement) \textcolor{keyword}{const};              \textcolor{comment}{// Returns the list of neighbours, given the precision.}}
\DoxyCodeLine{47     std::unordered\_set<std::shared\_ptr<T>> recalculate();}
\DoxyCodeLine{48     \textcolor{keywordtype}{void} empty();}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{comment}{// From TimeSensitive}}
\DoxyCodeLine{51     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} setT(\textcolor{keyword}{const} \textcolor{keywordtype}{float}\& dt);}
\DoxyCodeLine{52     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} apply();}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{comment}{//From Displayable}}
\DoxyCodeLine{55     \textcolor{keyword}{virtual} U getX() \textcolor{keyword}{const};}
\DoxyCodeLine{56     \textcolor{keyword}{virtual} U getY() \textcolor{keyword}{const};}
\DoxyCodeLine{57     \textcolor{keyword}{virtual} U getZ() \textcolor{keyword}{const};}
\DoxyCodeLine{58     \textcolor{keyword}{virtual} \mbox{\hyperlink{structPoint3D}{Point3D<U>}} getPosition() \textcolor{keyword}{const};}
\DoxyCodeLine{59     \textcolor{keyword}{virtual} std::unordered\_set<std::shared\_ptr<Point3D<U>>> getPPoints() \textcolor{keyword}{const};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{comment}{//From Printable}}
\DoxyCodeLine{62     \textcolor{keyword}{virtual} std::string to\_string(\textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& spread=\textcolor{keyword}{false}, \textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& full\_info=\textcolor{keyword}{false}, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}\& indent=0) \textcolor{keyword}{const};\textcolor{comment}{// :)}}
\DoxyCodeLine{63     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} print(\textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& spread=\textcolor{keyword}{false}, \textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& full\_info=\textcolor{keyword}{false}, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}\& indent=0) \textcolor{keyword}{const};\textcolor{comment}{// :)}}
\DoxyCodeLine{64 \};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{comment}{//Functions}}
\DoxyCodeLine{67 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} gravitOptimised(\mbox{\hyperlink{classSystem3D}{System3D<T, U>}}* psystem);\textcolor{comment}{// Gravit Function Optimsed by Barnes-\/Hutt algorithm}}
\DoxyCodeLine{68 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} elecOptimised(\mbox{\hyperlink{classSystem3D}{System3D<T, U>}}* psystem);}
\DoxyCodeLine{69 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> rrr2(std::shared\_ptr<T> pT1, std::shared\_ptr<T> pT2);\textcolor{comment}{// Returns l'acc exerc√©e par p2 sur p1}}
\DoxyCodeLine{70 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> rrr3(std::shared\_ptr<T> pT1, std::shared\_ptr<T> pT2);}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::System3D}}() \{}
\DoxyCodeLine{74     this-\/>a=(U)100;             \textcolor{comment}{//100x100m sided box}}
\DoxyCodeLine{75     poctree=std::make\_shared<Oct<T, U>>(this-\/>a);}
\DoxyCodeLine{76     ptrLaw=NULL;}
\DoxyCodeLine{77     m\_dt=0;}
\DoxyCodeLine{78 \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::\string~System3D}}() \{}
\DoxyCodeLine{81     pelements.clear();}
\DoxyCodeLine{82 \}}
\DoxyCodeLine{83 }
\DoxyCodeLine{84 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::System3D}}(\textcolor{keyword}{const} \mbox{\hyperlink{classSystem3D}{System3D<T, U>}}\& sys) \{}
\DoxyCodeLine{85     this-\/>a=sys.a;}
\DoxyCodeLine{86     poctree=std::make\_shared<Oct<T, U>>(this-\/>a);}
\DoxyCodeLine{87     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pT : sys.getPElements()) \{}
\DoxyCodeLine{88         this-\/>addPElement(pT);}
\DoxyCodeLine{89     \}}
\DoxyCodeLine{90     ptrLaw=sys.ptrLaw;}
\DoxyCodeLine{91     m\_dt=0;}
\DoxyCodeLine{92 \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 }
\DoxyCodeLine{100 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D_ae0fad393c64d5aea53dc476db88aaf48}{System3D<T, U>::setA}}(\textcolor{keyword}{const} U\& a) \{}
\DoxyCodeLine{101     poctree-\/>setA(a);}
\DoxyCodeLine{102     this-\/>recalculate();\textcolor{comment}{//Possible probleme}}
\DoxyCodeLine{103 \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{float} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getAlpha}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{106     \textcolor{keywordflow}{return} poctree-\/>m\_ALPHA;}
\DoxyCodeLine{107 \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::setAlpha}}(\textcolor{keyword}{const} \textcolor{keywordtype}{float}\& alpha) \{}
\DoxyCodeLine{110     poctree-\/>m\_ALPHA=alpha;}
\DoxyCodeLine{111 \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{121 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> std::shared\_ptr<T> \mbox{\hyperlink{classSystem3D_a109a6dd25d2f099aa15cb6c6a4547b39}{System3D<T, U>::addPElement}}(std::shared\_ptr<T> pelement) \{}
\DoxyCodeLine{122      std::shared\_ptr<T> pT=NULL;}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \textcolor{keywordflow}{if} (pelement!=NULL) \{}
\DoxyCodeLine{125         pT=poctree-\/>insert(pelement);}
\DoxyCodeLine{126         \textcolor{keywordflow}{if} (pT==NULL)\{}
\DoxyCodeLine{127             pelements.insert(pelement);}
\DoxyCodeLine{128         \}}
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keywordflow}{return} pT;}
\DoxyCodeLine{132 \}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> std::unordered\_set<std::shared\_ptr<T>> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getPNeighbors}}(\textcolor{keyword}{const} std::shared\_ptr<T> pelement)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{135     \textcolor{keywordflow}{return} poctree-\/>getPNeighbors(pelement);}
\DoxyCodeLine{136 \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{138 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::setT}}(\textcolor{keyword}{const} \textcolor{keywordtype}{float}\& dt) \{}
\DoxyCodeLine{139     m\_dt=dt;}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     \textcolor{comment}{// Set time for all objects.}}
\DoxyCodeLine{142     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pelement : pelements)\{}
\DoxyCodeLine{143         pelement-\/>setT(m\_dt);}
\DoxyCodeLine{144     \}}
\DoxyCodeLine{145     \textcolor{comment}{// If there is a law to apply... calls it}}
\DoxyCodeLine{146     \textcolor{keywordflow}{if} (ptrLaw!=NULL)\{}
\DoxyCodeLine{147         (*ptrLaw)(\textcolor{keyword}{this});}
\DoxyCodeLine{148     \}}
\DoxyCodeLine{149 \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::apply}}() \{}
\DoxyCodeLine{152     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pelement : pelements)\{}
\DoxyCodeLine{153         pelement-\/>apply();}
\DoxyCodeLine{154     \}}
\DoxyCodeLine{155     \textcolor{comment}{//Than we recalculate the System}}
\DoxyCodeLine{156     this-\/>recalculate();}
\DoxyCodeLine{157 \}}
\DoxyCodeLine{158 }
\DoxyCodeLine{159 }
\DoxyCodeLine{160 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> U \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getX}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{161     \textcolor{keywordflow}{return} poctree-\/>getPoint().x;}
\DoxyCodeLine{162 \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> U \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getY}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{165     \textcolor{keywordflow}{return} poctree-\/>getPoint().y;}
\DoxyCodeLine{166 \}}
\DoxyCodeLine{167 }
\DoxyCodeLine{168 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> U \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getZ}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{169     \textcolor{keywordflow}{return} poctree-\/>getPoint().z;}
\DoxyCodeLine{170 \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \mbox{\hyperlink{structPoint3D}{Point3D<U>}} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getPosition}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{173     \textcolor{keywordflow}{return} poctree-\/>getPoint();}
\DoxyCodeLine{174 \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> std::unordered\_set<std::shared\_ptr<Point3D<U>>> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::getPPoints}}()\textcolor{keyword}{ const}\{}
\DoxyCodeLine{177     std::unordered\_set<std::shared\_ptr<Point3D<U>>> ppoints;}
\DoxyCodeLine{178     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pelement : pelements)\{}
\DoxyCodeLine{179         std::unordered\_set<std::shared\_ptr<Point3D<U>>> ppoints\_element=pelement-\/>getPPoints();}
\DoxyCodeLine{180         \textcolor{keywordflow}{for} (std::shared\_ptr<\mbox{\hyperlink{structPoint3D}{Point3D<U>}}> ppoint : ppoints\_element)\{}
\DoxyCodeLine{181             ppoints.insert(ppoint);}
\DoxyCodeLine{182         \}}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184     \textcolor{keywordflow}{return} ppoints;}
\DoxyCodeLine{185 \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{187 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> std::unordered\_set<std::shared\_ptr<T>> \mbox{\hyperlink{classSystem3D}{System3D<T, U>::recalculate}}() \{\textcolor{comment}{//Than we recalculate the Oct.}}
\DoxyCodeLine{188     std::unordered\_set<std::shared\_ptr<T>> perrored\_elements=poctree-\/>recalculate();\textcolor{comment}{//Stores the objects that are now outside of the Oct}}
\DoxyCodeLine{189     \textcolor{comment}{// We get rid of them (not sure it works)}}
\DoxyCodeLine{190     \textcolor{keywordflow}{for} (std::shared\_ptr<T> perrored\_element : perrored\_elements)\{}
\DoxyCodeLine{191         printf(\textcolor{stringliteral}{"{}Forget this element !\(\backslash\)n"{}});}
\DoxyCodeLine{192         pelements.erase(perrored\_element);}
\DoxyCodeLine{193     \}}
\DoxyCodeLine{194     \textcolor{keywordflow}{return} perrored\_elements;}
\DoxyCodeLine{195 \}}
\DoxyCodeLine{196 }
\DoxyCodeLine{197 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::empty}}() \{}
\DoxyCodeLine{198     poctree-\/>empty();}
\DoxyCodeLine{199 \}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201 }
\DoxyCodeLine{202 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> std::string \mbox{\hyperlink{classSystem3D}{System3D<T, U>::to\_string}}(\textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& spread, \textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& full\_info, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}\& indent)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{203     std::string mes=((spread)?\textcolor{stringliteral}{"{}\(\backslash\)n"{}} : \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{204     mes+=to\_stringTabs(indent);}
\DoxyCodeLine{205 }
\DoxyCodeLine{206     mes+=\textcolor{stringliteral}{"{}SYSTEM3D["{}};}
\DoxyCodeLine{207     std::stringstream ss;}
\DoxyCodeLine{208     ss << \textcolor{keyword}{this};}
\DoxyCodeLine{209     mes+=ss.str();}
\DoxyCodeLine{210     mes+=\textcolor{stringliteral}{"{}]:\(\backslash\)n"{}};}
\DoxyCodeLine{211     mes+=to\_stringTabs(indent+1);}
\DoxyCodeLine{212     mes+=\textcolor{stringliteral}{"{}a="{}} + this-\/>a.to\_string(\textcolor{keyword}{false}, \textcolor{keyword}{false}, 0);}
\DoxyCodeLine{213     mes+=((spread)?\textcolor{stringliteral}{"{}\(\backslash\)n"{}} : \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{214 }
\DoxyCodeLine{215     \textcolor{keywordflow}{if} (full\_info)\{         \textcolor{comment}{// Problem}}
\DoxyCodeLine{216         mes+=poctree-\/>to\_string(spread, full\_info, indent+1);}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{keywordflow}{return} mes;}
\DoxyCodeLine{220 \}}
\DoxyCodeLine{221 }
\DoxyCodeLine{222 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} \mbox{\hyperlink{classSystem3D}{System3D<T, U>::print}}(\textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& spread, \textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& full\_info, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}\& indent)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{223     printTabs(indent);}
\DoxyCodeLine{224     std::cout << this-\/>to\_string(spread, full\_info, indent);}
\DoxyCodeLine{225 \}}
\DoxyCodeLine{226 }
\DoxyCodeLine{227 }
\DoxyCodeLine{228 }
\DoxyCodeLine{229 \textcolor{comment}{/*}}
\DoxyCodeLine{230 \textcolor{comment}{ * Functions}}
\DoxyCodeLine{231 \textcolor{comment}{ */}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233 }
\DoxyCodeLine{238 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} gravitOptimised(\mbox{\hyperlink{classSystem3D}{System3D<T, U>}}* psystem) \{}
\DoxyCodeLine{239     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pelement : psystem-\/>pelements) \{}
\DoxyCodeLine{240 }
\DoxyCodeLine{241         std::unordered\_set<std::shared\_ptr<T>> pneighbors=psystem-\/>poctree-\/>getPNeighbors(pelement);}
\DoxyCodeLine{242 }
\DoxyCodeLine{243         \textcolor{comment}{// Apply the grav law}}
\DoxyCodeLine{244         \textcolor{keywordflow}{for} (std::shared\_ptr<T> pneighbor : pneighbors) \{}
\DoxyCodeLine{245             \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> da=rrr2(pneighbor, pelement);             \textcolor{comment}{// Get the acceleration}}
\DoxyCodeLine{246             *pelement+=da*(\mbox{\hyperlink{structSN}{SN<float, char>}})psystem-\/>getT();                          \textcolor{comment}{//Surcharger l'op += entre T et Vector3D}}
\DoxyCodeLine{247         \}}
\DoxyCodeLine{248     \}}
\DoxyCodeLine{249 \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{254 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} U> \textcolor{keywordtype}{void} elecOptimised(\mbox{\hyperlink{classSystem3D}{System3D<T, U>}}* psystem) \{}
\DoxyCodeLine{255     \textcolor{keywordflow}{for} (std::shared\_ptr<T> pelement : psystem-\/>pelements) \{}
\DoxyCodeLine{256 }
\DoxyCodeLine{257         std::unordered\_set<std::shared\_ptr<T>> pneighbors=psystem-\/>poctree-\/>getPNeighbors(pelement);}
\DoxyCodeLine{258 }
\DoxyCodeLine{259         \textcolor{comment}{// Apply the grav law}}
\DoxyCodeLine{260         \textcolor{keywordflow}{for} (std::shared\_ptr<T> pneighbor : pneighbors) \{}
\DoxyCodeLine{261             \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> da=rrr3(pneighbor, pelement);             \textcolor{comment}{// Get the acceleration}}
\DoxyCodeLine{262             *pelement+=da*(\mbox{\hyperlink{structSN}{SN<float, char>}})psystem-\/>getT();                          \textcolor{comment}{//Surcharger l'op += entre T et Vector3D}}
\DoxyCodeLine{263         \}}
\DoxyCodeLine{264     \}}
\DoxyCodeLine{265 \}}
\DoxyCodeLine{266 }
\DoxyCodeLine{267 \textcolor{comment}{/*}}
\DoxyCodeLine{268 \textcolor{comment}{ * Gravitation}}
\DoxyCodeLine{269 \textcolor{comment}{ * Returns the acc (in norm) felt by pT2 due to pT1}}
\DoxyCodeLine{270 \textcolor{comment}{ * @param : pT1: src, pT2: target}}
\DoxyCodeLine{271 \textcolor{comment}{ */}}
\DoxyCodeLine{272 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> rrr2(std::shared\_ptr<T> pT1, std::shared\_ptr<T> pT2) \{}
\DoxyCodeLine{273     std::shared\_ptr<Vector3D<SN<float, char>>> pv(\textcolor{keyword}{new} \mbox{\hyperlink{classVector3D}{Vector3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>());}
\DoxyCodeLine{274     *pv-\/>pp1=(\mbox{\hyperlink{structPoint3D}{Point3D<SN<float, char>}}>)pT2-\/>getPosition();}
\DoxyCodeLine{275     *pv-\/>pp2=\mbox{\hyperlink{structPoint3D}{Point3D<SN<float, char>}}>\{(\mbox{\hyperlink{structSN}{SN<float, char>}})0,(\mbox{\hyperlink{structSN}{SN<float, char>}})0,(\mbox{\hyperlink{structSN}{SN<float, char>}})0\};}
\DoxyCodeLine{276 }
\DoxyCodeLine{277     \textcolor{keywordflow}{if} (pT1!=NULL \&\& pT2!=NULL \&\& pT1-\/>pfields!=NULL) \{\textcolor{comment}{// \&\& pT1-\/>pfields-\/>contains("{}mass"{})}}
\DoxyCodeLine{278         *pv-\/>pp2=pT1-\/>getPosition()-\/pT2-\/>getPosition();}
\DoxyCodeLine{279 }
\DoxyCodeLine{280         \mbox{\hyperlink{structSN}{SN<float, char>}} d=getDistance((\mbox{\hyperlink{structPoint3D}{Point3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>)pT1-\/>getPosition(), (\mbox{\hyperlink{structPoint3D}{Point3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>)pT2-\/>getPosition());}
\DoxyCodeLine{281         \textcolor{comment}{//printf("{}\(\backslash\)n\#\#\#\#\#\#\#\#\#\#\#\#d\(\backslash\)n"{});}}
\DoxyCodeLine{282         \textcolor{comment}{//d.print();                        // Probleme: 2 objects sont sur la meme pos (getNeighbors ne fait pas son job)}}
\DoxyCodeLine{283         \textcolor{comment}{//printf("{}\(\backslash\)n\#\#\#\#\#\#\#\#\#\#\#\#d\(\backslash\)n"{});}}
\DoxyCodeLine{284         \textcolor{comment}{//SN<float, char> n=G*abs(*((*pT1-\/>pfields)["{}mass"{}]))/(d*d);}}
\DoxyCodeLine{285         \textcolor{comment}{//n.print(true, true, 0);}}
\DoxyCodeLine{286         pv-\/>setNorm(G*abs(*((*pT1-\/>pfields)[\textcolor{stringliteral}{"{}mass"{}}]))/(d*d));}
\DoxyCodeLine{287     \}}
\DoxyCodeLine{288     \textcolor{comment}{//printf("{}\(\backslash\)n\#\#\#\#\#\#\#\#\#\#\#\#pv\(\backslash\)n"{});}}
\DoxyCodeLine{289     \textcolor{comment}{//pv-\/>print();}}
\DoxyCodeLine{290     \textcolor{comment}{//printf("{}\(\backslash\)n\#\#\#\#\#\#\#\#\#\#\#\#pv\(\backslash\)n"{});}}
\DoxyCodeLine{291     \textcolor{keywordflow}{return} *pv;}
\DoxyCodeLine{292 \}}
\DoxyCodeLine{293 }
\DoxyCodeLine{294 \textcolor{comment}{/*}}
\DoxyCodeLine{295 \textcolor{comment}{ * Electromagnetics}}
\DoxyCodeLine{296 \textcolor{comment}{ * Returns the acc (in norm) felt by pT2 due to pT1}}
\DoxyCodeLine{297 \textcolor{comment}{ * @param : pT1: src, pT2: target}}
\DoxyCodeLine{298 \textcolor{comment}{ */}}
\DoxyCodeLine{299 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T> \mbox{\hyperlink{classVector3D}{Vector3D<SN<float, char>}}> rrr3(std::shared\_ptr<T> pT1, std::shared\_ptr<T> pT2) \{}
\DoxyCodeLine{300     std::shared\_ptr<Vector3D<SN<float, char>>> pv(\textcolor{keyword}{new} \mbox{\hyperlink{classVector3D}{Vector3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>());}
\DoxyCodeLine{301     *pv-\/>pp1=(\mbox{\hyperlink{structPoint3D}{Point3D<SN<float, char>}}>)pT2-\/>getPosition();}
\DoxyCodeLine{302     *pv-\/>pp2=\mbox{\hyperlink{structPoint3D}{Point3D<SN<float, char>}}>\{(\mbox{\hyperlink{structSN}{SN<float, char>}})0,(\mbox{\hyperlink{structSN}{SN<float, char>}})0,(\mbox{\hyperlink{structSN}{SN<float, char>}})0\};}
\DoxyCodeLine{303 }
\DoxyCodeLine{304     \textcolor{keywordflow}{if} (pT1!=NULL \&\& pT2!=NULL \&\& pT1-\/>pfields!=NULL) \{\textcolor{comment}{// \&\& pT1-\/>pfields-\/>contains("{}mass"{})}}
\DoxyCodeLine{305         *pv-\/>pp2=pT1-\/>getPosition()-\/pT2-\/>getPosition();}
\DoxyCodeLine{306 }
\DoxyCodeLine{307         \mbox{\hyperlink{structSN}{SN<float, char>}} d=getDistance((\mbox{\hyperlink{structPoint3D}{Point3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>)pT1-\/>getPosition(), (\mbox{\hyperlink{structPoint3D}{Point3D}}<\mbox{\hyperlink{structSN}{SN<float, char>}}>)pT2-\/>getPosition());\textcolor{comment}{// Probleme: 2 objects sont sur la meme pos (getNeighbors ne fait pas son job)}}
\DoxyCodeLine{308         pv-\/>setNorm(K*abs(*((*pT1-\/>pfields)[\textcolor{stringliteral}{"{}charge"{}}]))/(d*d));}
\DoxyCodeLine{309     \}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311     \textcolor{keywordflow}{return} *pv;}
\DoxyCodeLine{312 \}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314 }
\DoxyCodeLine{315 }
\DoxyCodeLine{316 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* SYSTEM3D\_H\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
